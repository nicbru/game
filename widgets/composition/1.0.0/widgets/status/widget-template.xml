<container
    position="{@position}"
    width="{@width}"
    height="{@height}"
    left="{@left}"
    right="{@right}"
    top="{@top}"
    bottom="{@bottom}"
    margin="{@margin}"
    margin-top="{@margin-top}"
    margin-bottom="{@margin-bottom}"
    margin-left="{@margin-left}"
    margin-right="{@margin-right}"
    padding="{@padding}"
    padding-top="{@padding-top}"
    padding-bottom="{@padding-bottom}"
    padding-left="{@padding-left}"
    padding-right="{@padding-right}"
    xmlns:support="urn:aviarc:widget:support"
    xmlns:dataset="urn:aviarc:widget:com.aviarc.toronto.widget.core.action.dataset">
    <support:datacontext workflow="composition/status/init">
        <repeater name="{@name}-statusList" scroll-to-new="n" auto-refresh="n" show-timer="n" dataset="capabilities">
            <container position="static" class="clear-fix outline-grey {$capabilities._selected-class}">
                <text-static position="static" text="CHOOSE" height="20" padding-left="20"/>
                <text-static position="static" text="your" height="10" padding-left="20"/>
                <text-static position="static" text="{$capabilities.name}" height="20" padding-left="20"/>
            </container>
        </repeater>
        <behaviors xmlns="urn:aviarc:widget:com.aviarc.toronto.widget.core.action">
            <when system-event="onBindComplete">
                <call-widget-method method="{@name}-add-selected-class.run"/>
                <call-widget-method method="{@name}-statusList.rerender"/>
            </when>
            <when dataset-event="capabilities.onContentsReplaced">
                <call-widget-method method="{@name}-add-selected-class.run"/>
                <call-widget-method method="{@name}-statusList.rerender"/>
            </when>
            <action name="{@name}-add-selected-class">
                <dataset:dataset-iterator dataset="capabilities">
                    <dataset:dataset-iterator dataset="features">
                        <if>
                            <condition test="equal" value1="{$capabilities.id}" value2="{$features.parent-id}"/>
                            <then>
                                <set-field field="capabilities._selected-class" value="selected"/>
                            </then>
                        </if>
                    </dataset:dataset-iterator>
                </dataset:dataset-iterator>
            </action>
        </behaviors>
    </support:datacontext>
</container>